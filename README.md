# JavaScript

- javascriptå­¦ä¹  äºŽ 2023.05.09 å¼€ä»“

---

## ç¬¬12ç«  JSå¼‚æ­¥

#### 12.1 æ¦‚å¿µ

- åŒæ­¥ï¼šä»£ç æŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œå¦‚æžœå¤„äºŽé˜»å¡žçŠ¶æ€ï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œç›´åˆ°é˜»å¡žè¢«å¤„ç†

- å¼‚æ­¥ï¼šä»£ç ä¼šè¢«å»¶æ—¶æ‰§è¡Œï¼Œå³åŒæ­¥ä»£ç ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œå¼‚æ­¥ä»£ç åœ¨ä¸€å®šæ¡ä»¶è¢«è§¦å‘åŽï¼Œæ‰ä¼šæ‰§è¡Œï¼Œ**ç›¸æ¯”äºŽåŒæ­¥è€Œè¨€ï¼Œå¼‚æ­¥ä»£ç å¯èƒ½ä¸ä¼šæŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œä¸”ä¸ä¼šè¢«é˜»å¡žï¼Œå›žè°ƒå‡½æ•°ä¸èƒ½ç¼–å†™å¼‚æ­¥ä»£ç **

è¯´æ˜Žï¼š

1. åŒæ­¥ä»£ç ï¼Œä¸€èˆ¬çš„ä»£ç è¯­å¥

2. å¼‚æ­¥ä»£ç ï¼Œå¸¦æœ‰APIè¯·æ±‚ã€æ—¶é—´å‡½æ•°ã€AJAXç­‰ç­‰

3. AJAXï¼Œå³å¼‚æ­¥JSå’ŒXMLï¼Œå…è®¸ä½¿ç”¨å¼‚æ­¥æ–¹å¼ä¸‹çš„webæœåŠ¡å™¨è¿›è¡Œé€šè®¯ï¼Œå¯¹äºŽAJAXå›žè°ƒæ¥è¯´ï¼Œå¯ä»¥å®žçŽ°åŠ¨æ€è¯·æ±‚webæœåŠ¡å™¨ä¸‹çš„æ•°æ®

4. APIï¼Œåº”ç”¨ç¼–ç¨‹æŽ¥å£ï¼Œè½¯ä»¶çš„éƒ¨åˆ†åŠŸèƒ½å¯ä»¥è¢«ä½¿ç”¨åœ¨å¦ä¸€ä¸ªè½¯ä»¶ä¸Šï¼Œå…è®¸è½¯ä»¶ä¹‹é—´è¿›è¡Œäº¤äº’

#### 12.2 è¯·æ±‚ä¸Žå“åº”

URLçš„ç»„æˆï¼š

1. é€šè®¯åè®®

2. åŸŸå

3. èµ„æºåœ°å€

è¯·æ±‚åˆ°å“åº”çš„å®Œæ•´è¿‡ç¨‹ï¼š

1. å®¢æˆ·ç«¯å‘é€URLåˆ°åŸŸåç³»ç»Ÿè¿›è¡ŒIPæŸ¥è¯¢

2. æŸ¥è¯¢æˆåŠŸåŽï¼Œå°†IPåœ°å€è¿”å›žç»™å®¢æˆ·ç«¯

3. æœåŠ¡å™¨ä¸Žå®¢æˆ·ç«¯è¿›è¡ŒTCP/IPè¿žæŽ¥(Socket)

4. å®¢æˆ·ç«¯å‘é€HTTPè¯·æ±‚

5. æœåŠ¡å™¨å‘é€HTTPå“åº”

> HTTPè¯·æ±‚åŒ…æ‹¬ï¼šè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“
> 
> HTTPå“åº”åŒ…æ‹¬ï¼šå“åº”å¤´å’Œå“åº”ä½“
> 
> HTTPSè¯·æ±‚ï¼Œä¼šä½¿ç”¨TLSæˆ–SSLè¿›è¡ŒåŠ å¯†

#### 12.3 å›žè°ƒåœ°ç‹±

æ¦‚å¿µï¼šå¼‚æ­¥ä»£ç å½“ä¸­ï¼Œå‡ºçŽ°æ—¶é—´å‡½æ•°ã€è¯·æ±‚APIçš„ä»£ç å—é‡å¤ä½¿ç”¨å¤šæ¬¡ï¼Œä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ã€éš¾ä»¥ç†è§£çš„æƒ…å†µã€‚

#### 12.4 Fetch

Fetchæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºŽè¯·æ±‚èµ„æºï¼Œå¹¶æœ€ç»ˆè¿”å›žä¸€ä¸ª`Promise`å¯¹è±¡çš„`resolve`ç»“æžœ

#### 12.5 Promise

äº§ç”Ÿ`Promise`å¯¹è±¡ï¼š

- é€šè¿‡`fetch`å‡½æ•°ç”Ÿæˆ`Promise`å›žåº”

- åœ¨ä½¿ç”¨`then`æ–¹æ³•èŽ·å–`Promse`çš„ç»“æžœ

é“¾å¼ä¼ é€’å‚æ•°ï¼š

- åœ¨`then`æ–¹æ³•å†…ä½¿ç”¨`return`å†æ¬¡è¿”å›žä¸€ä¸ª`Promise`å¯¹è±¡

ç‰¹åˆ«åœ°ï¼Œ

1. `catch`æ–¹æ³•ä¹Ÿä¼šä¼ é€’ä¸€ä¸ª`Promise`å¯¹è±¡

2. `finally`æ–¹æ³•ä¼šé»˜è®¤æ‰§è¡Œ

ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
fetch(`https://restcountries.com/v3.1/name/${country}`)
        .then(response => response.json())
        .then(data => {
            renderCountry(data[0])
            const neighbour = data[0].borders[0]

            if (!neighbour) return;

            return fetch(`https://restcountries.com/v3.1/name/${neighbour}`);
        })
        .then(response => response.json())
        .then(data => renderCountry(data[0], 'neighbour'))
        .catch(error => {
            console.error(`${error} ðŸ’¥ðŸ’¥ðŸ’¥`)
            renderError(`Something went wrong ðŸ’¥ðŸ’¥ ${error.message}. Try again!`);
        })
        .finally(() => {
            countriesContainer.style.opacity = 1
        })
```